name: Code Review

permissions:
  contents: read
  pull-requests: write

on:
  pull_request:
    types: [opened, reopened, synchronize]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: anc95/ChatGPT-CodeReview@main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          # optional
          MODEL: gpt-3.5-turbo
          OPENAI_API_ENDPOINT: https://api.openai.com/v1
          LANGUAGE: Korean
          PROMPT: |
            PR 코드를 분석하고 다음 형식으로 리뷰해주세요:
            
            1) 전체 코드 품질 평가(간결히)
            2) 중요 문제점 최대 3개 (우선순위순):
              - 문제: [설명]
              - 개선: [코드 예시]
            3) 보안/성능 이슈 있을 경우만 언급
            4) 좋은 코드 패턴 하나 칭찬
            
            코드 예시는 실제 적용 가능한 수준으로 작성.
            불필요한 설명 없이 핵심만 전달.
            모든 지적에 이유 포함.